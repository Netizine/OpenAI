<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Projects\Netizine.OpenAI\tests\Netizine.OpenAI.Tests\Infrastructure\JsonConverters\OpenAIEntityConverterTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
namespace OpenAI.Tests
{
    using Newtonsoft.Json;
    using Newtonsoft.Json.Linq;
    using OpenAI;
    using Xunit;

    public class OpenAIEntityConverterTest : BaseOpenAITest
    {
        [Fact]
        public void DeserializeNull()
        {
            var json = &quot;null&quot;;
            var obj = JsonConvert.DeserializeObject&lt;TestObject&gt;(json);
            Assert.Null(obj);
        }

        [Fact]
        public void DeserializeRoot()
        {
            var json = @&quot;{ 
                            &quot;&quot;supported_field&quot;&quot;: 1, 
                            &quot;&quot;unsupported_field&quot;&quot;: 2
                         }&quot;;
            var obj = JsonConvert.DeserializeObject&lt;TestObject&gt;(json);
            Assert.Equal(1, obj.SupportedField);
            Assert.NotNull(obj.RawJObject);
            Assert.Equal(2, obj.RawJObject[&quot;unsupported_field&quot;]);
            Assert.Equal(obj.RawJObject.ToString(), JObject.Parse(json).ToString());
        }

        [Fact]
        public void DeserializeChild()
        {
            var childJson = @&quot;{
                                &quot;&quot;child_supported_field&quot;&quot;: 1,
                                &quot;&quot;child_unsupported_field&quot;&quot;: 2,
                              }&quot;;
            var json = $@&quot;{{ &quot;&quot;child&quot;&quot;: {childJson} }}&quot;;
            var obj = JsonConvert.DeserializeObject&lt;TestObject&gt;(json);

            Assert.NotNull(obj);
            Assert.Null(obj.SupportedField);
            Assert.NotNull(obj.RawJObject);
            Assert.Equal(obj.RawJObject.ToString(), JObject.Parse(json).ToString());

            Assert.NotNull(obj.Child);
            Assert.Equal(1, obj.Child.ChildSupportedField);
            Assert.NotNull(obj.Child.RawJObject);
            Assert.Equal(2, obj.Child.RawJObject[&quot;child_unsupported_field&quot;]);
            Assert.Equal(obj.Child.RawJObject.ToString(), JObject.Parse(childJson).ToString());
        }

        private class TestObject : OpenAIEntity&lt;TestObject&gt;
        {
            [JsonProperty(&quot;supported_field&quot;)]
            public long? SupportedField { get; set; }

            [JsonProperty(&quot;child&quot;)]
            public TestChildObject Child { get; set; }
        }

        private class TestChildObject : OpenAIEntity&lt;TestObject&gt;
        {
            [JsonProperty(&quot;child_supported_field&quot;)]
            public long ChildSupportedField { get; set; }
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[13,13,13,31,1],[14,13,14,71,1],[15,13,15,30,1],[16,9,16,10,1],[21,13,24,29,1],[25,13,25,71,1],[26,13,26,49,1],[27,13,27,44,1],[28,13,28,66,1],[29,13,29,85,1],[30,9,30,10,1],[35,13,38,34,1],[39,13,39,57,1],[40,13,40,71,1],[42,13,42,33,1],[43,13,43,45,1],[44,13,44,44,1],[45,13,45,85,1],[47,13,47,39,1],[48,13,48,60,1],[49,13,49,50,1],[50,13,50,78,1],[51,13,51,96,1],[52,9,52,10,1],[57,43,57,47,1],[57,48,57,52,1],[60,44,60,48,1],[60,49,60,53,1],[66,47,66,51,1],[66,52,66,56,1]]);
    </script>
  </body>
</html>