<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Projects\Netizine.OpenAI\tests\Netizine.OpenAI.Tests\Entities\_base\OpenAIEntityTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
#pragma warning disable CS0618
namespace OpenAI.Tests
{
    using Newtonsoft.Json;
    using OpenAI;
    using OpenAI.Infrastructure;
    using Xunit;

    public class OpenAIEntityTest : BaseOpenAITest
    {
        public OpenAIEntityTest(
            OpenAIMockFixture openAIMockFixture)
            : base(openAIMockFixture)
        {
        }

        [Fact]
        public void FromJsonAuto()
        {
            var json = &quot;{\n  \&quot;id\&quot;: \&quot;text-davinci-003\&quot;,\n  \&quot;object\&quot;: \&quot;engine\&quot;,\n  \&quot;owner\&quot;: \&quot;openai\&quot;,\n  \&quot;ready\&quot;: true\n}&quot;;

            var o = OpenAIEntity.FromJson(json);

            Assert.NotNull(o);
            Assert.IsType&lt;Engine&gt;(o);
            Assert.Equal(&quot;text-davinci-003&quot;, ((Engine)o).Id);
        }

        [Fact]
        public void FromJsonAutoUnknownObject()
        {
            var json = &quot;{\&quot;id\&quot;: \&quot;ch_123\&quot;, \&quot;object\&quot;: \&quot;foo\&quot;}&quot;;

            var o = OpenAIEntity.FromJson(json);

            Assert.Null(o);
        }

        [Fact]
        public void FromJsonAutoNoObject()
        {
            var json = &quot;{\&quot;id\&quot;: \&quot;ch_123\&quot;}&quot;;

            var o = OpenAIEntity.FromJson(json);

            Assert.Null(o);
        }

        [Fact]
        public void FromJsonOnType()
        {
            var json = &quot;{\&quot;integer\&quot;: 234, \&quot;string\&quot;: \&quot;String!\&quot;}&quot;;

            var o = TestEntity.FromJson(json);

            Assert.NotNull(o);
            Assert.Equal(234, o.Integer);
            Assert.Equal(&quot;String!&quot;, o.String);
        }

        [Fact]
        public void FromJsonGeneric()
        {
            var json = &quot;{\&quot;integer\&quot;: 234, \&quot;string\&quot;: \&quot;String!\&quot;}&quot;;

            var o = OpenAIEntity.FromJson&lt;TestEntity&gt;(json);

            Assert.NotNull(o);
            Assert.Equal(234, o.Integer);
            Assert.Equal(&quot;String!&quot;, o.String);
        }

        [Fact]
        public void ToJson()
        {
            var o = new TestEntity
            {
                Integer = 234,
                String = &quot;String!&quot;,
            };

            var json = o.ToJson().Replace(&quot;\r\n&quot;, &quot;\n&quot;);

            var expectedJson = &quot;{\n  \&quot;integer\&quot;: 234,\n  \&quot;string\&quot;: \&quot;String!\&quot;\n}&quot;;
            Assert.Equal(expectedJson, json);
        }

        [Fact]
        public void RawJObject()
        {
            var service = new EngineService(this.OpenAIClient);
            var engine = service.Get(&quot;text-davinci-003&quot;);

            Assert.NotNull(engine);

            // Access `id`, a string element
            Assert.Equal(engine.Id, engine.RawJObject[&quot;id&quot;]);

            // Access `object`, a string element
            Assert.Equal(engine.Object, engine.RawJObject[&quot;object&quot;]);
        }

        private class TestEntity : OpenAIEntity&lt;TestEntity&gt;
        {
            [JsonProperty(&quot;integer&quot;)]
            public int Integer { get; set; }

            [JsonProperty(&quot;string&quot;)]
            public string String { get; set; }
        }

        private class TestNestedEntity : OpenAIEntity&lt;TestNestedEntity&gt;, IHasId
        {
            [JsonProperty(&quot;id&quot;)]
            public string Id { get; set; }

            [JsonProperty(&quot;bar&quot;)]
            public int Bar { get; set; }
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[13,15,13,38,1],[15,9,15,10,1],[20,13,20,136,1],[22,13,22,49,1],[24,13,24,31,1],[25,13,25,38,1],[26,13,26,62,1],[27,9,27,10,1],[32,13,32,68,1],[34,13,34,49,1],[36,13,36,28,1],[37,9,37,10,1],[42,13,42,47,1],[44,13,44,49,1],[46,13,46,28,1],[47,9,47,10,1],[52,13,52,70,1],[54,13,54,47,1],[56,13,56,31,1],[57,13,57,42,1],[58,13,58,47,1],[59,9,59,10,1],[64,13,64,70,1],[66,13,66,61,1],[68,13,68,31,1],[69,13,69,42,1],[70,13,70,47,1],[71,9,71,10,1],[76,13,80,15,1],[82,13,82,57,1],[84,13,84,87,1],[85,13,85,46,1],[86,9,86,10,1],[91,13,91,64,1],[92,13,92,58,1],[94,13,94,36,1],[97,13,97,62,1],[100,13,100,70,1],[101,9,101,10,1],[106,34,106,38,1],[106,39,106,43,1],[109,36,109,40,1],[109,41,109,45,1],[115,32,115,36,0],[115,37,115,41,0],[118,30,118,34,0],[118,35,118,39,0]]);
    </script>
  </body>
</html>